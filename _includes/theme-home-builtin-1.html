<!-- Home page design with small circular image bisecting card. -->

{% assign essay_pages = site.pages | where: "type", "essay" | where_exp: "page", "page.draft != true" %}
{% assign paper_pages = site.pages | where: "type", "paper" | where_exp: "page", "page.draft != true" %}
{% assign project_pages = site.pages | where: "type", "project" | where_exp: "page", "page.draft != true" %}
{% assign num_essays = essay_pages.size %}
{% assign num_papers = paper_pages.size %}
{% assign num_projects = project_pages.size %}

<div style="height: 100%; margin-top: -75px" class="ui middle aligned grid ">

  <div class="column">

    <div style="position: relative; top: 75px; z-index: 1" class="ui fluid centered small circular image">
      <img src="{{ site.data.bio.basics.picture }}">
    </div>


    <div style="max-width: 550px; padding-top: 75px; margin-top: 0px" class="ui fluid centered card">

      <div class="center aligned content">
        <span class="header">{{ site.data.bio.basics.name }}</span>
        <div class="meta">
          <span class="date">{{ site.data.bio.basics.label }}</span>
        </div>
        <div class="left aligned description">
          {{ site.data.bio.basics.summary }}
        </div>
      </div>
      <div class="center aligned content">
        <div class="description">
          Interests:
          {% for interest in site.data.bio.interests %}
          {{ interest.name }}{% if forloop.last != true %}, {% endif %}
          {% endfor %}

        </div>
      </div>
      <div class="center aligned extra content">
        {% include home-network-links.html %}
      </div>
      <div class="center aligned content homepage-buttons-container">
        <button class="ui basic button tab-button" data-tab="projects">Projects ({{ num_projects }})</button>
        <button class="ui basic button tab-button" data-tab="papers">Papers ({{ num_papers }})</button>
        <button class="ui basic button tab-button" data-tab="essays">Essays ({{ num_essays }})</button>
        <button class="ui basic button tab-button" data-tab="bio">{{ site.bio-page-label }}</button>
        <button class="ui basic button dark-mode-toggle" onclick="toggleDarkMode()" title="Toggle Dark Mode">
          <span class="theme-text">Light Mode</span> <i class="lightbulb icon"></i>
        </button>
      </div>
    </div>
  </div>

</div>

<!-- Tab content sections - only one visible at a time -->
<div id="tab-content" class="ui container" style="margin-top: 40px; min-height: 60vh; padding: 40px 0;">

  <section id="projects-tab" class="tab-content" style="display: none;">
    <h2 class="ui center aligned header">Projects</h2>
    {% include content-projects.html %}
  </section>

  <section id="papers-tab" class="tab-content" style="display: none;">
    <h2 class="ui center aligned header">Papers</h2>
    {% include content-papers.html %}
  </section>

  <section id="essays-tab" class="tab-content" style="display: none;">
    <h2 class="ui center aligned header">Essays</h2>
    {% include content-essays.html %}
  </section>

  <section id="bio-tab" class="tab-content" style="display: none;">
    <h2 class="ui center aligned header">Resume</h2>
    {% include content-bio.html %}
  </section>

</div>

<style>
  /* Tab navigation styling */
  .homepage-buttons-container .tab-button {
    transition: all 0.3s ease !important;
    cursor: pointer !important;
  }

  .homepage-buttons-container .tab-button:hover {
    background-color: var(--cambridge-blue) !important;
    color: var(--english-violet) !important;
    transform: translateY(-1px);
    box-shadow: 0 2px 8px var(--shadow-color);
  }

  /* Active tab button styling */
  .homepage-buttons-container .tab-button.active {
    background-color: var(--cambridge-blue) !important;
    color: var(--english-violet) !important;
    font-weight: bold !important;
  }

  .homepage-buttons-container .tab-button.active:hover {
    background-color: var(--slate-gray) !important;
    color: var(--honeydew) !important;
  }

  /* Dark mode toggle button */
  .homepage-buttons-container .dark-mode-toggle {
    cursor: pointer !important;
    transition: all 0.2s ease;
  }

  .homepage-buttons-container .dark-mode-toggle:hover {
    background-color: var(--cambridge-blue) !important;
    color: var(--english-violet) !important;
    transform: translateY(-1px);
    box-shadow: 0 2px 8px var(--shadow-color);
  }

  /* Tab content styling */
  #tab-content {
    background-color: transparent !important;
  }

  .tab-content {
    animation: fadeIn 0.3s ease-in-out;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(10px);
    }

    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .tab-content .ui.header {
    color: var(--text-primary) !important;
    margin-bottom: 30px !important;
  }

  /* Ensure all cards in tab content inherit theme */
  .tab-content .ui.card {
    background-color: var(--bg-secondary) !important;
    border: 1px solid var(--border-color) !important;
    box-shadow: 0 2px 8px var(--shadow-color) !important;
  }

  .tab-content .ui.card .header {
    color: var(--text-primary) !important;
  }

  .tab-content .ui.card .meta {
    color: var(--text-secondary) !important;
  }

  .tab-content .ui.card .description {
    color: var(--text-primary) !important;
  }

  /* Buttons in tab content */
  .tab-content .ui.button {
    background-color: var(--cambridge-blue) !important;
    color: var(--english-violet) !important;
    border: 1px solid var(--slate-gray) !important;
  }

  .tab-content .ui.button:hover {
    background-color: var(--slate-gray) !important;
    color: var(--honeydew) !important;
  }

  .tab-content .ui.basic.button {
    background-color: transparent !important;
    color: var(--text-primary) !important;
    border: 1px solid var(--border-color) !important;
  }

  .tab-content .ui.basic.button:hover {
    background-color: var(--cambridge-blue) !important;
    color: var(--english-violet) !important;
  }
</style>

<script>
  // Tab navigation functionality
  document.addEventListener('DOMContentLoaded', function () {
    const tabButtons = document.querySelectorAll('.tab-button');
    const tabContents = document.querySelectorAll('.tab-content');

    tabButtons.forEach(button => {
      button.addEventListener('click', function () {
        const targetTab = this.getAttribute('data-tab');

        // Remove active class from all buttons
        tabButtons.forEach(btn => btn.classList.remove('active'));

        // Add active class to clicked button
        this.classList.add('active');

        // Hide all tab contents
        tabContents.forEach(content => {
          content.style.display = 'none';
          content.classList.remove('active');
        });

        // Show target tab content
        const targetContent = document.getElementById(targetTab + '-tab');
        if (targetContent) {
          targetContent.style.display = 'block';
          targetContent.classList.add('active');
        }
      });
    });
  });

  // Simple project loading for individual project pages
  function loadProject(projectUrl, projectTitle) {
    // For now, just navigate to the project page
    // This can be enhanced later if needed
    window.location.href = '{{ site.baseurl }}' + projectUrl;
  }
</script>